webpackJsonp([1],{0:function(t,e){},1:function(t,e){},2:function(t,e){},BLs7:function(t,e){},"D+mr":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={};n.d(o,"userSignUp",function(){return S}),n.d(o,"userSignIn",function(){return R}),n.d(o,"addAccountRecord",function(){return x}),n.d(o,"updateAccountRecord",function(){return y}),n.d(o,"getAccountRecords",function(){return D}),n.d(o,"deleteAccountRecord",function(){return U});var c=n("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=n("VU/8")(null,s,!1,function(t){n("BLs7")},"data-v-1ae2b1cf",null).exports,i=n("/ocq"),r=n("NYxO"),u=n("Xxa5"),d=n.n(u),l=n("exGp"),p=n.n(l),m=n("//Fk"),f=n.n(m),h=n("mtWM"),v=n.n(h),A=n("mw3O"),I=n.n(A),g=n("Au9i");v.a.defaults.timeout=6e4,v.a.interceptors.request.use(function(t){return b.state.user.token.access_token&&(t.headers.Authorization=b.state.user.token.token_type+" "+b.state.user.token.access_token),t},function(t){return g.Indicator.close(),Object(g.Toast)("响应超时"),f.a.reject(t)}),v.a.interceptors.response.use(function(t){return t},function(t){if(t.response)switch(t.response.status){case 401:rt.replace({path:"/Login",query:{redirect:rt.currentRoute.fullPath}})}return f.a.reject(t.response)});var _=v.a,C="https://api.round-king.com",T={getAccountTypes:function(t){return _.get(C+"/Account/Types/"+t)},getAccountRecords:function(t){return _.get(C+"/Account/List?"+I.a.stringify(t))},createAccountRecord:function(t){return _.post(C+"/Account",t)},updateAccountRecord:function(t,e){return _.put(C+"/Account/"+t,e)},deleteAccountRecord:function(t){return _.delete(C+"/Account/"+t)}},k={signIn:function(t){return _.post(C+"/UserInfo/Login",t)},signUp:function(t){return _.post(C+"/UserInfo",t)},getUser:function(t){return _.get(C+"/UserInfo/"+t)}},S=function(){var t=p()(d.a.mark(function t(e,n){var o=e.commit;e.dispatch,e.state;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.signUp(n).then(function(t){var e=t.data;e.IsSuccess?(console.log(e),o("SET_TOKEN",e.Data.Token),o("SET_CURRENT_USER",e.Data.UserInfo),o("SET_IS_LOGIN",!0),g.Indicator.close()):(g.Indicator.close(),Object(g.Toast)(e.Message))}).catch(function(t){g.Indicator.close(),Object(g.Toast)("注册失败")});case 2:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),R=function(){var t=p()(d.a.mark(function t(e,n){var o=e.commit;e.dispatch,e.state;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.signIn(n).then(function(t){var e=t.data;e.IsSuccess?(o("SET_TOKEN",e.Data.Token),o("SET_CURRENT_USER",e.Data.UserInfo),o("SET_IS_LOGIN",!0)):(g.Indicator.close(),Object(g.Toast)(e.Message))}).catch(function(t){g.Indicator.close(),Object(g.Toast)("登录异常")});case 2:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),x=function(t,e){var n=t.commit,o=t.state,c=o.accountRecords.accountList.findIndex(function(t){return t.Date==e.AccountDate});if(-1==c){var s=o.accountRecords.accountList.findIndex(function(t){return new Date(e.AccountDate)>new Date(t.Date)});-1==s&&(s=o.accountRecords.accountList.length),n("SPLICE_ACCOUNT_ITEM",{index:s,record:{Date:e.AccountDate,DateAmount:e.Amount,AccountRecords:[e],MonthExpend:"",MonthIncome:""}})}else{n("CREATE_ACCOUNT_RECORD",{index:c,dateAmount:1==e.Type?(parseFloat(o.accountRecords.accountList[c].DateAmount)+parseFloat(e.Amount)).toFixed(2):o.accountRecords.accountList[c].DateAmount,recordItem:e})}var a=new Date(e.AccountDate),i=new Date;a.getFullYear()==i.getFullYear()&&a.getMonth()==i.getMonth()&&(0==e.Type?n("SET_MONTH_AMOUNT",{monthIncome:(parseFloat(o.accountRecords.monthIncome)+parseFloat(e.Amount)).toFixed(2),monthExpend:o.accountRecords.monthExpend}):n("SET_MONTH_AMOUNT",{monthIncome:o.accountRecords.monthIncome,monthExpend:(parseFloat(o.accountRecords.monthExpend)+parseFloat(e.Amount)).toFixed(2)}))},y=function(t,e){var n=t.commit,o=t.state;e.updateInfo.hasUpdateDate?(n("DELETE_ACCOUNT_RECORD",e.updateInfo),x({commit:n,state:o},e.record)):(0==e.record.Type?(e.dateAmount=o.accountRecords.accountList[e.updateInfo.index1].DateAmount,n("SET_MONTH_AMOUNT",{monthIncome:(parseFloat(o.accountRecords.monthIncome)+parseFloat(e.updateInfo.updateAmount)).toFixed(2),monthExpend:o.accountRecords.monthExpend})):(e.dateAmount=(parseFloat(o.accountRecords.accountList[e.updateInfo.index1].DateAmount)+parseFloat(e.updateInfo.updateAmount)).toFixed(2),n("SET_MONTH_AMOUNT",{monthIncome:o.accountRecords.monthIncome,monthExpend:(parseFloat(o.accountRecords.monthExpend)+parseFloat(e.updateInfo.updateAmount)).toFixed(2)})),n("UPDATE_ACCOUNT_ITEM",e))},D=function(t){var e=t.commit,n=t.state;if(!n.accountRecords.isLoading&&!n.accountRecords.allLoaded){var o={PageIndex:n.accountRecords.pageIndex,PageSize:n.accountRecords.pageSize,UserId:n.user.currentUser.Id};e("SET_IS_LOADING",!0),T.getAccountRecords(o).then(function(t){var o=t.data;o.IsSuccess?0==o.Data.length?(e("SET_ALL_LOADED",!0),e("SET_IS_LOADING",!1),Object(g.Toast)(o.Message)):(o.Data.forEach(function(t){var o=n.accountRecords.accountList.findIndex(function(e){return e.Date==t.Date});-1==o?e("PUSH_ACCOUNT_ITEM",t):e("SET_ACCOUNT_LIST",{index:o,dateAmount:t.DateAmount,recordItems:t.AccountRecords}),e("SET_MONTH_AMOUNT",{monthIncome:t.MonthIncome,monthExpend:t.MonthExpend})}),e("SET_PAGE_INFO",{pageIndex:n.accountRecords.pageIndex+1,pageSize:n.accountRecords.pageSize})):(console.error(o.Message),Object(g.Toast)(o.Message)),e("SET_IS_LOADING",!1)}).catch(function(t){console.error(t),Object(g.Toast)("获取列表异常"),e("SET_IS_LOADING",!1),e("SET_ALL_LOADED",!0)})}},U=function(t,e){var n=t.commit,o=t.state,c=o.accountRecords.accountList[e.index1].AccountRecords[e.index2],s=new Date(c.AccountDate),a=new Date;s.getFullYear()==a.getFullYear()&&s.getMonth()==a.getMonth()&&(0==c.Type?n("SET_MONTH_AMOUNT",{monthIncome:(parseFloat(o.accountRecords.monthIncome)+parseFloat(c.Amount)).toFixed(2),monthExpend:o.accountRecords.monthExpend}):n("SET_MONTH_AMOUNT",{monthIncome:o.accountRecords.monthIncome,monthExpend:(parseFloat(o.accountRecords.monthExpend)+parseFloat(c.Amount)).toFixed(2)})),n("DELETE_ACCOUNT_RECORD",e)},w={state:{token:{},isLogin:!1,currentUser:{},routerLog:{},isBack:!1},mutations:{SET_TOKEN:function(t,e){t.token=e},SET_CURRENT_USER:function(t,e){t.currentUser=e},SET_IS_LOGIN:function(t,e){t.isLogin=e},UPDATE_CURRENT_USER:function(t,e){for(var n in e)user.hasOwnProperty(n)&&(t.currentUser[n]=e[n])},SET_ROUTER_LOG:function(t,e){t.routerLog.prev=e.prev,t.routerLog.next=e.next},SET_IS_BACK:function(t,e){t.isBack=e}}},E={state:{pageIndex:1,pageSize:8,isLoading:!1,allLoaded:!1,accountList:[],monthIncome:0,monthExpend:0,savedPosition:0},mutations:{SET_PAGE_INFO:function(t,e){t.pageIndex=e.pageIndex,t.pageSize=e.pageSize},SET_ALL_LOADED:function(t,e){t.allLoaded=e},SET_IS_LOADING:function(t,e){t.isLoading=e},CREATE_ACCOUNT_RECORD:function(t,e){t.accountList[e.index].DateAmount=e.dateAmount,t.accountList[e.index].AccountRecords.unshift(e.recordItem)},SPLICE_ACCOUNT_ITEM:function(t,e){t.accountList.splice(e.index,0,e.record)},PUSH_ACCOUNT_ITEM:function(t,e){t.accountList.push(e)},UPDATE_ACCOUNT_ITEM:function(t,e){t.accountList[e.updateInfo.index1].DateAmount=e.dateAmount,t.accountList[e.updateInfo.index1].AccountRecords[e.updateInfo.index2]=e.record},SET_ACCOUNT_LIST:function(t,e){t.accountList[e.index].DateAmount=e.dateAmount,e.recordItems.forEach(function(n){t.accountList[e.index].AccountRecords.some(function(t){return t.Id==n.Id})||t.accountList[e.index].AccountRecords.push(n)})},SET_MONTH_AMOUNT:function(t,e){t.monthIncome=e.monthIncome,t.monthExpend=e.monthExpend},DELETE_ACCOUNT_RECORD:function(t,e){if(1==t.accountList[e.index1].AccountRecords.length)t.accountList.splice(e.index1,1);else{var n=t.accountList[e.index1],o=n.AccountRecords[e.index2];1==o.Type?(t.accountList[e.index1].DateAmount=(parseFloat(n.DateAmount)-parseFloat(o.Amount)).toFixed(2),t.accountList[e.index1].MonthExpend=(parseFloat(n.MonthExpend)-parseFloat(o.Amount)).toFixed(2)):t.accountList[e.index1].MonthIncome=(parseFloat(n.MonthIncome)-parseFloat(o.Amount)).toFixed(2),t.accountList[e.index1].AccountRecords.splice(e.index2,1)}},SET_SAVED_POSITION:function(t,e){t.savedPosition=e}}};c.default.use(r.a);var b=new r.a.Store({actions:o,modules:{user:w,accountRecords:E},strict:!1}),O=n("Dd8w"),L=n.n(O),N=void 0,M={created:function(){(N=this).getAccountRecords()},computed:L()({},Object(r.c)({AccountList:function(t){return t.accountRecords.accountList},AllLoaded:function(t){return t.accountRecords.allLoaded}})),methods:L()({infinite:function(t){N.getAccountRecords().then(function(){t()})}},Object(r.b)({getAccountRecords:"getAccountRecords"}))},P={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("scroller",{ref:"scrollerBottom",staticStyle:{top:"72px"},attrs:{"on-infinite":t.infinite}},[n("transition-group",{attrs:{name:"records"}},t._l(t.AccountList,function(e,o){return n("div",{key:e.Date},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-6 day-left"},[n("span",{staticClass:"day"},[t._v(t._s(e.Date))])]),t._v(" "),n("div",{staticClass:"mid-day-total"}),t._v(" "),n("div",{staticClass:"col-6 day-right"},[n("span",{staticClass:"day"},[t._v(t._s(e.DateAmount))])])]),t._v(" "),t._l(e.AccountRecords,function(e,c){return[0==e.Type?n("div",{key:e.Id,staticClass:"row"},[n("div",{staticClass:"col-6 left"},[n("router-link",{staticClass:"link",attrs:{to:{name:"addAccount",params:{index1:o,index2:c}}}},[n("span",{staticClass:"amount"},[t._v(t._s(e.Amount))]),t._v(" "),n("span",{staticClass:"type-name"},[t._v(t._s(e.TypeName))])])],1),t._v(" "),n("i",{class:"mid icon iconfont icon-"+e.TypeCode}),t._v(" "),n("div",{staticClass:"col-6 right"})]):t._e(),t._v(" "),1==e.Type?n("div",{key:e.Id,staticClass:"row"},[n("div",{staticClass:"col-6 left"}),t._v(" "),n("i",{class:"mid icon iconfont icon-"+e.TypeCode}),t._v(" "),n("div",{staticClass:"col-6 right"},[n("router-link",{staticClass:"link",attrs:{to:{name:"addAccount",params:{index1:o,index2:c}}}},[n("span",{staticClass:"type-name"},[t._v(t._s(e.TypeName))]),t._v(" "),n("span",{staticClass:"amount"},[t._v(t._s(e.Amount))])])],1)]):t._e()]})],2)})),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.AllLoaded,expression:"AllLoaded"}],staticClass:"row allLoad"})],1)],1)},staticRenderFns:[]};var F=n("VU/8")(M,P,!1,function(t){n("iovv")},"data-v-15f8d210",null).exports,$={computed:L()({},Object(r.c)({MonthIncome:function(t){return t.accountRecords.monthIncome},MonthExpend:function(t){return t.accountRecords.monthExpend},AvatarUrl:function(t){return t.user.currentUser.AvatarUrl||"./static/img/avatar.jpg"}})),components:{ItemList:F},beforeRouteEnter:function(t,e,n){sessionStorage.askPositon&&"/"!=e.path?n(function(t){t&&t.$refs.ItemList.$refs.scrollerBottom&&setTimeout(function(){t.$refs.ItemList.$refs.scrollerBottom.scrollTo(0,sessionStorage.askPositon,!1)},0)}):(sessionStorage.askPositon="",n())},beforeRouteLeave:function(t,e,n){sessionStorage.askPositon=this.$refs.ItemList.$refs.scrollerBottom&&this.$refs.ItemList.$refs.scrollerBottom.getPosition()&&this.$refs.ItemList.$refs.scrollerBottom.getPosition().top,n()}},j={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"account-list"},[e("div",{staticClass:"top"},[e("div",{staticClass:"header"},[e("img",{staticClass:"avatar",attrs:{src:this.AvatarUrl,alt:"avatar",srcset:""}})]),this._v(" "),e("div",{staticClass:"total"},[e("div",{staticClass:"col-6 income"},[e("p",[this._v("本月收入")]),this._v(" "),e("p",[this._v(this._s(this.MonthIncome))])]),this._v(" "),e("div",{staticClass:"col-6 expend"},[e("p",[this._v("本月支出")]),this._v(" "),e("p",[this._v(this._s(this.MonthExpend))])])])]),this._v(" "),e("keep-alive",[e("item-list",{ref:"ItemList"})],1),this._v(" "),e("div",{staticClass:"fix-add"},[e("router-link",{staticClass:"fix-add-link",attrs:{to:"/Account/Add"}},[this._v("+")])],1)],1)},staticRenderFns:[]};var B=n("VU/8")($,j,!1,function(t){n("X4eq")},"data-v-5fa2e9e1",null).exports,H=n("mvHQ"),Y=n.n(H),G={data:function(){return{AccountDateModel:"",AccountYear:"",AccountMonth:"",AccountDate:"",Integer:"",Decimal:"",CalcAmount:this.Amount,SumAmount:"0.00",OperatorType:"",OkOperatorType:"",HasDot:!1}},created:function(){this.AccountDateModel=this.RecordDate;var t=this.RecordDate.split("-");this.AccountYear=t[0],this.AccountMonth=t[1],this.AccountDate=t[2]},props:["Amount","RecordDate"],methods:{openDatePicker:function(t){this.$refs[t].open()},handleChange:function(t){var e=new Date(t);this.AccountYear=e.getFullYear(),this.AccountMonth=e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1),this.AccountDate=e.getDate()>=10?e.getDate():"0"+e.getDate(),this.AccountDateModel=this.AccountYear+"-"+this.AccountMonth+"-"+this.AccountDate,this.emitAccountDate()},clickCalcNumber:function(t){""!=this.OperatorType&&(this.CalcAmount="0.00",this.Integer="",this.Decimal=""),this.HasDot?(this.Decimal.length<2&&(this.Decimal+=t),""==this.Integer&&(this.Integer="0")):this.Integer+=t;var e=this.CalcAmount.split(".");e[0]=this.Integer,1==this.Decimal.length?e[1]=this.Decimal+"0":2==this.Decimal.length?e[1]=this.Decimal:e[1]="00",this.CalcAmount=e[0]+"."+e[1],this.OperatorType="",this.emitAmount()},clickCalcDot:function(){this.HasDot=!0},clickCalcClear:function(){this.CalcAmount="0.00",this.Integer="",this.Decimal="",this.SumAmount="0.00",this.OperatorType="",this.OkOperatorType="",this.HasDot=!1,this.emitAmount()},clickCalcOperate:function(t){this.OkOperatorType=t,""==this.OperatorType&&("+"==t?(this.OperatorType="+",this.SumAmount=(parseFloat(this.SumAmount)+parseFloat(this.CalcAmount)).toFixed(2),this.CalcAmount=this.SumAmount):"-"==t?(this.OperatorType="-",0!=parseFloat(this.SumAmount)?(this.SumAmount=(parseFloat(this.SumAmount)-parseFloat(this.CalcAmount)).toFixed(2),this.CalcAmount=this.SumAmount):this.SumAmount=this.CalcAmount):this.OperatorType="",this.HasDot=!1),this.emitAmount()},clickCalcOk:function(){this.$emit("clickOk")},clickRemark:function(){this.$emit("openRemark",!1)},emitAmount:function(){this.$emit("showAmount",this.CalcAmount)},emitAccountDate:function(){this.$emit("setAccountDate",this.AccountDateModel)}}},q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container calc"},[n("div",{staticClass:"row calc-set"},[n("div",{staticClass:"col-6",on:{click:function(e){t.openDatePicker("date-picker")}}},[n("p",{staticClass:"calc-year"},[t._v(t._s(t.AccountYear))]),t._v(" "),n("p",{staticClass:"calc-date"},[t._v(t._s(t.AccountMonth)+"月"+t._s(t.AccountDate)+"日")])]),t._v(" "),n("div",{staticClass:"col-6"},[n("p",{staticClass:"calc-remark",on:{click:t.clickRemark}},[t._v("备注")])])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-3",on:{click:function(e){t.clickCalcNumber(1)}}},[t._v("1")]),t._v(" "),n("div",{staticClass:"col-3",on:{click:function(e){t.clickCalcNumber(2)}}},[t._v("2")]),t._v(" "),n("div",{staticClass:"col-3",on:{click:function(e){t.clickCalcNumber(3)}}},[t._v("3")]),t._v(" "),n("div",{staticClass:"col-3",on:{click:function(e){t.clickCalcOperate("+")}}},[t._v("+")]),t._v(" "),n("div",{staticClass:"col-3",on:{click:function(e){t.clickCalcNumber(4)}}},[t._v("4")]),t._v(" "),n("div",{staticClass:"col-3",on:{click:function(e){t.clickCalcNumber(5)}}},[t._v("5")]),t._v(" "),n("div",{staticClass:"col-3",on:{click:function(e){t.clickCalcNumber(6)}}},[t._v("6")]),t._v(" "),n("div",{staticClass:"col-3",on:{click:function(e){t.clickCalcOperate("-")}}},[t._v("-")]),t._v(" "),n("div",{staticClass:"col-9"},[n("div",{staticClass:"col-4",on:{click:function(e){t.clickCalcNumber(7)}}},[t._v("7")]),t._v(" "),n("div",{staticClass:"col-4",on:{click:function(e){t.clickCalcNumber(8)}}},[t._v("8")]),t._v(" "),n("div",{staticClass:"col-4",on:{click:function(e){t.clickCalcNumber(9)}}},[t._v("9")]),t._v(" "),n("div",{staticClass:"col-4 calc-clear",on:{click:t.clickCalcClear}},[t._v("清零")]),t._v(" "),n("div",{staticClass:"col-4",on:{click:function(e){t.clickCalcNumber(0)}}},[t._v("0")]),t._v(" "),n("div",{staticClass:"col-4",on:{click:t.clickCalcDot}},[t._v(".")])]),t._v(" "),n("div",{staticClass:"col-3 calc-ok",on:{click:t.clickCalcOk}},[t._v("\n      OK\n    ")])]),t._v(" "),n("mt-datetime-picker",{ref:"date-picker",attrs:{type:"date"},on:{confirm:t.handleChange},model:{value:t.AccountDateModel,callback:function(e){t.AccountDateModel=e},expression:"AccountDateModel"}})],1)},staticRenderFns:[]};var V=n("VU/8")(G,q,!1,function(t){n("jhXC")},"data-v-1ddfb890",null).exports,z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"slide-up",mode:"out-in"}},[n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("i",{staticClass:"title-back icon iconfont icon-fanhui",on:{click:t.closeRemark}}),t._v(" "),n("div",{staticClass:"col-12 title"},[t._v("备注")])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("span",{staticClass:"txt-count"},[t._v(t._s(t.InputCount)+"/200")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.Remark,expression:"Remark"}],staticClass:"remark",attrs:{rows:"8",placeholder:"请输入备注信息",maxlength:"200"},domProps:{value:t.Remark},on:{input:[function(e){e.target.composing||(t.Remark=e.target.value)},t.descInput]}})]),t._v(" "),n("div",{staticClass:"col-12 finish"},[n("button",{staticClass:"btn btn-primary btn-finish",on:{click:t.finish}},[t._v("完成")])])])])])},staticRenderFns:[]};var X=n("VU/8")({data:function(){return{InputCount:0,Remark:""}},methods:{descInput:function(){this.InputCount=this.Remark.length},closeRemark:function(){this.$emit("closeRemark",!0)},finish:function(){this.$emit("setRemarkInfo",this.Remark),this.$emit("closeRemark",!0)}}},z,!1,function(t){n("bnDL")},"data-v-954eedee",null).exports,K=void 0,J={data:function(){return{Id:0,UserId:0,AccountTypeList:[],AccountIncomeTypeList:[],AccountExpendTypeList:[],SelectedId:4,SelectedType:"yiban",SelectedTypeName:"一般",Type:1,Amount:"0.00",RemarkNotOpen:!0,RemarkInfo:"",AccountDate:"",AccountDateBack:"",AmountBack:"",SlideName:""}},created:function(){K=this;var t=new Date;K.UserId=K.$store.state.user.currentUser.Id,K.getAccountTypeList(),K.AccountDate=t.getFullYear()+"-"+(t.getMonth()+1>=10?t.getMonth()+1:"0"+(t.getMonth()+1))+"-"+(t.getDate()>=10?t.getDate():"0"+t.getDate());var e=this.$route.params.index1,n=this.$route.params.index2;if(void 0!==n&&void 0!==n){var o=this.$store.state.accountRecords.accountList[e].AccountRecords[n];this.Id=o.Id,this.SelectedId=o.AccountTypeId,this.SelectedType=o.TypeCode,this.SelectedTypeName=o.TypeName,this.Type=o.Type,this.Amount=o.Amount,this.RemarkInfo=o.Remark,this.AccountDate=o.AccountDate,this.AccountDateBack=o.AccountDate,this.AmountBack=o.Amount}},beforeDestroy:function(){g.Indicator.close()},methods:L()({clickClose:function(){this.$router.go(-1)},clickDelete:function(){var t=this;g.Indicator.open("删除中..."),T.deleteAccountRecord(this.Id).then(function(e){var n=e.data;n.IsSuccess?t.deleteAccountRecord({index1:t.$route.params.index1,index2:t.$route.params.index2}).then(function(){t.$router.go(-1)}):(g.Indicator.close(),Object(g.Toast)(n.Message))}).catch(function(){g.Indicator.close(),Object(g.Toast)("删除失败")})},saveRecord:function(){var t=this;if("0.00"!==this.Amount){var e={UserId:this.UserId,Type:this.Type,AccountTypeId:this.SelectedId,Amount:this.Amount,Remark:this.RemarkInfo,AccountDate:this.AccountDate};g.Indicator.open("保存中..."),0===this.Id?T.createAccountRecord(e).then(function(e){var n=e.data;n.IsSuccess?(n.Data.TypeCode=t.SelectedType,n.Data.TypeName=t.SelectedTypeName,t.addAccountRecord(n.Data).then(function(){t.$router.go(-1)})):(g.Indicator.close(),Object(g.Toast)(n.Message))}).catch(function(t){console.log(t),g.Indicator.close(),Object(g.Toast)("操作异常")}):T.updateAccountRecord(this.Id,e).then(function(n){var o=n.data;if(o.IsSuccess){e.Id=t.Id,e.TypeCode=t.SelectedType,e.TypeName=t.SelectedTypeName;var c={hasUpdateDate:t.AccountDateBack!==t.AccountDate,index1:t.$route.params.index1,index2:t.$route.params.index2,updateAmount:(parseFloat(t.Amount)-parseFloat(t.AmountBack)).toFixed(2)};t.updateAccountRecord({updateInfo:c,record:e}).then(function(){t.$router.go(-1)})}else g.Indicator.close(),Object(g.Toast)(o.Message)}).catch(function(t){console.log(t),g.Indicator.close(),Object(g.Toast)("操作异常")})}else Object(g.Toast)("请输入金额")},getAccountTypeList:function(){var t=this,e=JSON.parse(sessionStorage.getItem("account-types-expend")),n=JSON.parse(sessionStorage.getItem("account-types-income"));e&&n?(this.AccountIncomeTypeList=n,this.AccountExpendTypeList=e):T.getAccountTypes(this.UserId).then(function(e){var n=e.data;t.AccountIncomeTypeList=n.Data.filter(function(t){return 0==t.Type}),t.AccountExpendTypeList=n.Data.filter(function(t){return 1==t.Type}),sessionStorage.setItem("account-types-expend",Y()(t.AccountExpendTypeList)),sessionStorage.setItem("account-types-income",Y()(t.AccountIncomeTypeList))}).catch(function(t){console.error(t)})},selectAccountType:function(t){this.Type=t,this.SelectedType=0==this.Type?"shouru":"yiban",this.SelectedId=0==this.Type?1:4,this.SelectedTypeName="一般"},selectType:function(t,e,n){this.SelectedId=t,this.SelectedType=e,this.SelectedTypeName=n},getAccountDate:function(t){this.AccountDate=t},showAmount:function(t){this.Amount=t},showRemark:function(t){this.RemarkNotOpen=t},closeRemark:function(t){this.RemarkNotOpen=t},getRemarkInfo:function(t){this.RemarkInfo=t}},Object(r.b)({addAccountRecord:"addAccountRecord",updateAccountRecord:"updateAccountRecord",deleteAccountRecord:"deleteAccountRecord"})),computed:{IsIncome:function(){return 0==this.Type?" active":""},IsExpend:function(){return 1==this.Type?" active":""}},components:{Calculator:V,Remark:X}},W={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.RemarkNotOpen,expression:"RemarkNotOpen"}],staticClass:"container"},[n("div",{staticClass:"row add-header"},[n("i",{staticClass:"title-back icon iconfont icon-fanhui",on:{click:t.clickClose}}),t._v(" "),void 0!==t.$route.params.index1&&void 0!==t.$route.params.index2?n("i",{staticClass:"title-delete icon iconfont icon-guanbi",on:{click:t.clickDelete}}):t._e(),t._v(" "),n("div",{class:"col-6 add-income"+t.IsIncome,on:{click:function(e){t.selectAccountType(0)}}},[t._v("收入")]),t._v(" "),n("div",{class:"col-6 add-expend"+t.IsExpend,on:{click:function(e){t.selectAccountType(1)}}},[t._v("支出")])]),t._v(" "),n("div",{staticClass:"row add-type"},[n("div",{staticClass:"col-2"},[n("i",{class:"selectedType icon iconfont icon-"+t.SelectedType})]),t._v(" "),n("div",{staticClass:"col-2 type-info"},[t._v("\n        "+t._s(t.SelectedTypeName)+"\n      ")]),t._v(" "),n("div",{staticClass:"col-8 type-amount"},[t._v("\n        "+t._s(t.Amount)+"\n      ")])]),t._v(" "),n("div",{staticClass:"row"},[t._l(t.AccountIncomeTypeList,function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:0==t.Type,expression:"Type==0"}],key:e.Code,staticClass:"col-2 type-icon-list-icon",on:{click:function(n){t.selectType(e.Id,e.Code,e.Name)}}},[n("i",{class:"icon iconfont icon-"+e.Code}),t._v(" "),n("p",[t._v(t._s(e.Name))])])}),t._v(" "),t._l(t.AccountExpendTypeList,function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:1==t.Type,expression:"Type==1"}],key:e.Code,staticClass:"col-2 type-icon-list-icon",on:{click:function(n){t.selectType(e.Id,e.Code,e.Name)}}},[n("i",{class:"icon iconfont icon-"+e.Code}),t._v(" "),n("p",[t._v(t._s(e.Name))])])})],2),t._v(" "),n("Calculator",{attrs:{Amount:t.Amount,RecordDate:t.AccountDate},on:{showAmount:t.showAmount,openRemark:t.showRemark,clickOk:t.saveRecord,setAccountDate:t.getAccountDate}})],1),t._v(" "),n("Remark",{directives:[{name:"show",rawName:"v-show",value:!t.RemarkNotOpen,expression:"!RemarkNotOpen"}],on:{closeRemark:t.closeRemark,setRemarkInfo:t.getRemarkInfo}})],1)},staticRenderFns:[]};var Q=n("VU/8")(J,W,!1,function(t){n("D+mr")},"data-v-81afe29a",null).exports,Z=n("fzgq"),tt=n.n(Z),et={data:function(){return{IsSignUp:!1,IsRmeberUser:!1,SignInInfo:{Account:"",Password:""},SignUpInfo:{Account:"",Password:"",ConfirmPassword:""}}},beforeCreate:function(){var t=tt()({width:window.innerWidth,height:window.innerHeight});document.body.style.background="url("+t.png()+")"},created:function(){this.SignInInfo.Account=localStorage.getItem("rk-account"),this.SignInInfo.Password=localStorage.getItem("rk-password"),this.SignInInfo.Account&&this.SignInInfo.Password&&this.SignInInfo.Account.length>0&&this.SignInInfo.Password.length>0&&(this.IsRmeberUser=!0)},beforeDestroy:function(){document.body.style.background="",g.Indicator.close()},methods:L()({switchSignUp:function(t){this.IsSignUp=t},signUpAccount:function(){var t=this;return p()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.IsSignUp){e.next=2;break}return e.abrupt("return");case 2:if(t.SignUpInfo.Account){e.next=5;break}return Object(g.Toast)("请输入帐号"),e.abrupt("return");case 5:if(t.SignUpInfo.Password.length){e.next=8;break}return Object(g.Toast)("请输入密码"),e.abrupt("return");case 8:if(t.SignUpInfo.Password==t.SignUpInfo.ConfirmPassword){e.next=11;break}return Object(g.Toast)("请输入相同密码"),e.abrupt("return");case 11:return g.Indicator.open({text:"正在注册, 请稍等..."}),e.next=14,t.signUp({Account:t.SignUpInfo.Account,Password:t.SignUpInfo.Password}).then(function(){t.$router.push("/Account/List")});case 14:case"end":return e.stop()}},e,t)}))()},signInAccount:function(){var t=this;return p()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.IsSignUp){e.next=2;break}return e.abrupt("return");case 2:if(t.SignInInfo.Account){e.next=5;break}return Object(g.Toast)("请输入帐号"),e.abrupt("return");case 5:if(t.SignInInfo.Password){e.next=8;break}return Object(g.Toast)("请输入密码"),e.abrupt("return");case 8:return g.Indicator.open({text:"登录中..."}),e.next=11,t.signIn(t.SignInInfo).then(function(){t.IsRmeberUser?(localStorage.setItem("rk-account",t.SignInInfo.Account),localStorage.setItem("rk-password",t.SignInInfo.Password)):(localStorage.setItem("rk-account",""),localStorage.setItem("rk-password","")),t.$router.push("/Account/List")});case 11:case"end":return e.stop()}},e,t)}))()}},Object(r.b)({signIn:"userSignIn",signUp:"userSignUp"}))},nt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"wrapper"},[n("div",{staticClass:"container"},[n("transition",{attrs:{name:"flipOutY",mode:"out-in"}},[t.IsSignUp?t._e():n("div",{key:"signIn",staticClass:"signIn"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"account"}},[t._v("帐号：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.SignInInfo.Account,expression:"SignInInfo.Account"}],attrs:{type:"text",name:"account",id:"account",required:""},domProps:{value:t.SignInInfo.Account},on:{input:function(e){e.target.composing||t.$set(t.SignInInfo,"Account",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"password"}},[t._v("密码：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.SignInInfo.Password,expression:"SignInInfo.Password"}],attrs:{type:"password",name:"password",id:"password",required:""},domProps:{value:t.SignInInfo.Password},on:{input:function(e){e.target.composing||t.$set(t.SignInInfo,"Password",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"setting-group"},[n("span",{staticClass:"remember"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.IsRmeberUser,expression:"IsRmeberUser"}],attrs:{type:"checkbox",name:"remeberUser",id:"remeberUser"},domProps:{checked:Array.isArray(t.IsRmeberUser)?t._i(t.IsRmeberUser,null)>-1:t.IsRmeberUser},on:{change:function(e){var n=t.IsRmeberUser,o=e.target,c=!!o.checked;if(Array.isArray(n)){var s=t._i(n,null);o.checked?s<0&&(t.IsRmeberUser=n.concat([null])):s>-1&&(t.IsRmeberUser=n.slice(0,s).concat(n.slice(s+1)))}else t.IsRmeberUser=c}}}),t._v(" "),n("label",{staticClass:"remeberUser",attrs:{for:"remeberUser"}},[t._v("记住账号")])]),t._v(" "),n("span",{staticClass:"forgetPwd"},[t._v("忘记密码?")])]),t._v(" "),n("div",{staticClass:"btn-group"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-6"},[n("button",{staticClass:"btn btnSignUp",attrs:{type:"button"},on:{click:function(e){t.switchSignUp(!0)}}},[t._v("注册")])]),t._v(" "),n("div",{staticClass:"col-6"},[n("button",{staticClass:"btn btnSignIn",attrs:{type:"button"},on:{click:t.signInAccount}},[t._v("登录")])])])])]),t._v(" "),t.IsSignUp?n("div",{key:"signUp",staticClass:"signUp"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"signUp-account"}},[t._v("帐号：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.SignUpInfo.Account,expression:"SignUpInfo.Account"}],attrs:{type:"text",name:"account",id:"signUp-account","min-length":"4",maxlength:"12"},domProps:{value:t.SignUpInfo.Account},on:{input:function(e){e.target.composing||t.$set(t.SignUpInfo,"Account",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"signUp-password"}},[t._v("密码：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.SignUpInfo.Password,expression:"SignUpInfo.Password"}],attrs:{type:"password",name:"signUp-password",id:"signUp-password",minlength:"6",maxlength:"12"},domProps:{value:t.SignUpInfo.Password},on:{input:function(e){e.target.composing||t.$set(t.SignUpInfo,"Password",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"confirm-password"}},[t._v("确认密码：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.SignUpInfo.ConfirmPassword,expression:"SignUpInfo.ConfirmPassword"}],attrs:{type:"password",name:"confirm-password",id:"confirm-password",minlength:"6",maxlength:"12"},domProps:{value:t.SignUpInfo.ConfirmPassword},on:{input:function(e){e.target.composing||t.$set(t.SignUpInfo,"ConfirmPassword",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"btn-group"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-6"},[n("button",{staticClass:"btn btnSignUp",attrs:{type:"button"},on:{click:t.signUpAccount}},[t._v("注册")])]),t._v(" "),n("div",{staticClass:"col-6"},[n("button",{staticClass:"btn btnSignIn",attrs:{type:"button"},on:{click:function(e){t.switchSignUp(!1)}}},[t._v("返回")])])])])]):t._e()])],1)])])},staticRenderFns:[]};var ot=n("VU/8")(et,nt,!1,function(t){n("RqTY")},"data-v-ed3ace9e",null).exports,ct={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"layout"},[e("transition",{attrs:{name:this.transitionName}},[e("router-view",{staticClass:"child-view"})],1)],1)},staticRenderFns:[]};var st=n("VU/8")({data:function(){return{transitionName:"slide-left"}},watch:{$route:function(t,e){this.$store.state.user.routerLog.prev==t.path.toLowerCase()&&"/account/list"==t.path.toLowerCase()?this.transitionName="slide-right":this.transitionName="slide-left",this.$store.commit("SET_ROUTER_LOG",{prev:e.path.toLowerCase(),next:t.path.toLowerCase()})}}},ct,!1,function(t){n("RfTw")},"data-v-2d08c6a2",null).exports,at=this;c.default.use(i.a);var it=new i.a({routes:[{path:"/",component:st,children:[{path:"",alias:"/Login",component:ot},{path:"/Account/List",name:"accountList",component:B},{path:"/Account/Add",name:"addAccount",component:Q}]}],scrollBehavior:function(t,e,n){return n||{x:0,y:0}}});it.beforeEach(function(t,e,n){"/"==e.path&&"/Login"===e.path||n(),b.state.user.isLogin?n():n({path:"/Login"})}),it.afterEach(function(t,e){at.isBack=!1});var rt=it,ut=n("v5o6"),dt=n.n(ut),lt=n("POcy"),pt=n.n(lt);n("d8/S"),n("XlLT"),n("VaBq");c.default.use(pt.a),c.default.use(g.InfiniteScroll),c.default.component(g.Spinner.name,g.Spinner),c.default.component(g.DatetimePicker.name,g.DatetimePicker),c.default.config.productionTip=!1,dt.a.attach(document.body),new c.default({el:"#app",router:rt,store:b,template:"<App/>",components:{App:a}})},RfTw:function(t,e){},RqTY:function(t,e){},VaBq:function(t,e){},X4eq:function(t,e){},XlLT:function(t,e){},bnDL:function(t,e){},"d8/S":function(t,e){},iovv:function(t,e){},jhXC:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.25f70b0c7e0b4103c43f.js.map