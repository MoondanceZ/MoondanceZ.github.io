webpackJsonp([1],{"+YHr":function(t,e){},0:function(t,e){},1:function(t,e){},2:function(t,e){},"2bHb":function(t,e){},BvrH:function(t,e,n){t.exports=n.p+"static/img/avatar.dbc47b6.jpg"},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c={};n.d(c,"userSignUp",function(){return R}),n.d(c,"userSignIn",function(){return S}),n.d(c,"addAccountRecord",function(){return x}),n.d(c,"updateAccountRecord",function(){return y}),n.d(c,"getAccountRecords",function(){return w}),n.d(c,"deleteAccountRecord",function(){return D});var o=n("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("transition",{attrs:{name:this.transitionName}},[e("router-view")],1)],1)},staticRenderFns:[]};var s=n("VU/8")({data:function(){return{transitionName:"slide-left"}},beforeRouteUpdate:function(t,e,n){var c=this.$router.isBack;this.transitionName=c?"slide-right":"slide-left",this.$router.isBack=!1,n()}},a,!1,function(t){n("+YHr")},"data-v-d1fc1216",null).exports,i=n("/ocq"),r=n("NYxO"),u=n("Xxa5"),d=n.n(u),l=n("exGp"),p=n.n(l),m=n("//Fk"),f=n.n(m),v=n("mtWM"),h=n.n(v),_=n("mw3O"),A=n.n(_),g=n("Au9i");h.a.defaults.timeout=6e4,h.a.interceptors.request.use(function(t){return E.state.user.token.access_token&&(t.headers.Authorization=E.state.user.token.token_type+" "+E.state.user.token.access_token),t},function(t){return g.Indicator.close(),Object(g.Toast)("响应超市"),f.a.reject(t)}),h.a.interceptors.response.use(function(t){return t},function(t){if(t.response)switch(t.response.status){case 401:et.replace({path:"/Login",query:{redirect:et.currentRoute.fullPath}})}return f.a.reject(t.response.data)});var I=h.a,C="https://api.round-king.com",T={getAccountTypes:function(t){return I.get(C+"/Account/Types/"+t)},getAccountRecords:function(t){return I.get(C+"/Account/List?"+A.a.stringify(t))},createAccountRecord:function(t){return I.post(C+"/Account",t)},updateAccountRecord:function(t,e){return I.put(C+"/Account/"+t,e)},deleteAccountRecord:function(t){return I.delete(C+"/Account/"+t)}},k={getToken:function(t){return I.post("https://identityserver4.round-king.com/connect/token",A.a.stringify(t))},signUp:function(t){return I.post(C+"/UserInfo",t)},getUser:function(t){return I.get(C+"/UserInfo/"+t)}},R=function(){var t=p()(d.a.mark(function t(e,n){var c,o=e.commit,a=(e.dispatch,e.state);return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.signUp(n).then(function(t){var e=t.data;e.IsSuccess?(console.log(e),o("SET_CURRENT_USER",e.Data)):(g.Indicator.close(),Object(g.Toast)(e.Message))}).catch(function(t){g.Indicator.close(),Object(g.Toast)("注册失败")});case 2:if(!a.user.currentUser.Account){t.next=8;break}return c={grant_type:"password",client_id:"pwd_client",client_secret:"pwd_secret",scope:"rk offline_access",username:n.Account,password:n.Password},g.Indicator.close(),g.Indicator.open({text:"注册成功, 登录中..."}),t.next=8,k.getToken(c).then(function(t){var e=t.data;console.log(e),o("SET_TOKEN",e),o("SET_IS_LOGIN",!0)}).catch(function(t){g.Indicator.close(),Object(g.Toast)("登录异常：获取 TOKEN 失败")});case 8:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),S=function(){var t=p()(d.a.mark(function t(e,n){var c=e.commit,o=(e.dispatch,e.state);return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.getToken(n.tokenRequest).then(function(t){var e=t.data;console.log(e),sessionStorage.setItem("access_token",e.access_token),sessionStorage.setItem("refresh_token",e.refresh_token),sessionStorage.setItem("token_type",e.token_type),c("SET_TOKEN",e)}).catch(function(t){g.Indicator.close(),Object(g.Toast)("登录异常：获取 TOKEN 失败")});case 2:if(!o.user.token.access_token){t.next=5;break}return t.next=5,k.getUser(n.account).then(function(t){var e=t.data;e.IsSuccess?(console.log(e),c("SET_CURRENT_USER",e.Data),c("SET_IS_LOGIN",!0)):(g.Indicator.close(),Object(g.Toast)(e.Message))}).catch(function(t){g.Indicator.close(),Object(g.Toast)("登录异常：获取用户信息失败")});case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),x=function(t,e){var n=t.commit,c=t.state,o=c.accountRecords.accountList.findIndex(function(t){return t.Date==e.AccountDate});if(-1==o){var a=c.accountRecords.accountList.findIndex(function(t){return new Date(e.AccountDate)>new Date(t.Date)});-1==a&&(a=c.accountRecords.accountList.length),n("SPLICE_ACCOUNT_ITEM",{index:a,record:{Date:e.AccountDate,DateAmount:e.Amount,AccountRecords:[e],MonthExpend:"",MonthIncome:""}})}else{n("CREATE_ACCOUNT_RECORD",{index:o,dateAmount:1==e.Type?(parseFloat(c.accountRecords.accountList[o].DateAmount)+parseFloat(e.Amount)).toFixed(2):c.accountRecords.accountList[o].DateAmount,recordItem:e})}var s=new Date(e.AccountDate),i=new Date;s.getFullYear()==i.getFullYear()&&s.getMonth()==i.getMonth()&&(0==e.Type?n("SET_MONTH_AMOUNT",{monthIncome:(parseFloat(c.accountRecords.monthIncome)+parseFloat(e.Amount)).toFixed(2),monthExpend:c.accountRecords.monthExpend}):n("SET_MONTH_AMOUNT",{monthIncome:c.accountRecords.monthIncome,monthExpend:(parseFloat(c.accountRecords.monthExpend)+parseFloat(e.Amount)).toFixed(2)}))},y=function(t,e){var n=t.commit,c=t.state;e.updateInfo.hasUpdateDate?(n("DELETE_ACCOUNT_RECORD",e.updateInfo),x({commit:n,state:c},e.record)):(0==e.record.Type?(e.dateAmount=c.accountRecords.accountList[e.updateInfo.index1].DateAmount,n("SET_MONTH_AMOUNT",{monthIncome:(parseFloat(c.accountRecords.monthIncome)+parseFloat(e.updateInfo.updateAmount)).toFixed(2),monthExpend:c.accountRecords.monthExpend})):(e.dateAmount=(parseFloat(c.accountRecords.accountList[e.updateInfo.index1].DateAmount)+parseFloat(e.updateInfo.updateAmount)).toFixed(2),n("SET_MONTH_AMOUNT",{monthIncome:c.accountRecords.monthIncome,monthExpend:(parseFloat(c.accountRecords.monthExpend)+parseFloat(e.updateInfo.updateAmount)).toFixed(2)})),n("UPDATE_ACCOUNT_ITEM",e))},w=function(t){var e=t.commit,n=t.state;if(!n.accountRecords.isLoading&&!n.accountRecords.allLoaded){var c={PageIndex:n.accountRecords.pageIndex,PageSize:n.accountRecords.pageSize,UserId:n.user.currentUser.Id};e("SET_IS_LOADING",!0),T.getAccountRecords(c).then(function(t){var c=t.data;c.IsSuccess?0==c.Data.length?(e("SET_ALL_LOADED",!0),Object(g.Toast)(c.Message)):(c.Data.forEach(function(t){var c=n.accountRecords.accountList.findIndex(function(e){return e.Date==t.Date});-1==c?e("PUSH_ACCOUNT_ITEM",t):e("SET_ACCOUNT_LIST",{index:c,dateAmount:t.DateAmount,recordItems:t.AccountRecords}),e("SET_MONTH_AMOUNT",{monthIncome:t.MonthIncome,monthExpend:t.MonthExpend})}),e("SET_PAGE_INFO",{pageIndex:n.accountRecords.pageIndex+1,pageSize:n.accountRecords.pageSize})):(console.error(c.Message),Object(g.Toast)(c.Message)),e("SET_IS_LOADING",!1)}).catch(function(t){console.error(t),Object(g.Toast)("获取列表异常"),e("SET_IS_LOADING",!1)})}},D=function(t,e){var n=t.commit;t.state;n("DELETE_ACCOUNT_RECORD",e)},b={state:{token:{},isLogin:!1,currentUser:{},routerLog:{}},mutations:{SET_TOKEN:function(t,e){t.token=e},SET_CURRENT_USER:function(t,e){t.currentUser=e},SET_IS_LOGIN:function(t,e){t.isLogin=e},UPDATE_CURRENT_USER:function(t,e){for(var n in e)user.hasOwnProperty(n)&&(t.currentUser[n]=e[n])},SET_ROUTER_LOG:function(t,e){t.routerLog.prev=e.prev,t.routerLog.next=e.next}}},U={state:{pageIndex:1,pageSize:10,isLoading:!1,allLoaded:!1,accountList:[],monthIncome:0,monthExpend:0},mutations:{SET_PAGE_INFO:function(t,e){t.pageIndex=e.pageIndex,t.pageSize=e.pageSize},SET_ALL_LOADED:function(t,e){t.allLoaded=e},SET_IS_LOADING:function(t,e){t.isLoading=e},CREATE_ACCOUNT_RECORD:function(t,e){t.accountList[e.index].DateAmount=e.dateAmount,t.accountList[e.index].AccountRecords.unshift(e.recordItem)},SPLICE_ACCOUNT_ITEM:function(t,e){t.accountList.splice(e.index,0,e.record)},PUSH_ACCOUNT_ITEM:function(t,e){t.accountList.push(e)},UPDATE_ACCOUNT_ITEM:function(t,e){t.accountList[e.updateInfo.index1].DateAmount=e.dateAmount,t.accountList[e.updateInfo.index1].AccountRecords[e.updateInfo.index2]=e.record},SET_ACCOUNT_LIST:function(t,e){t.accountList[e.index].DateAmount=e.dateAmount,e.recordItems.forEach(function(n){t.accountList[e.index].AccountRecords.some(function(t){return t.Id==n.Id})||t.accountList[e.index].AccountRecords.push(n)})},SET_MONTH_AMOUNT:function(t,e){t.monthIncome=e.monthIncome,t.monthExpend=e.monthExpend},DELETE_ACCOUNT_RECORD:function(t,e){1==t.accountList[e.index1].AccountRecords.length?t.accountList.splice(e.index1,1):t.accountList[e.index1].AccountRecords.splice(e.index2,1)}}};o.default.use(r.a);var E=new r.a.Store({actions:c,modules:{user:b,accountRecords:U},strict:!1}),O=n("Dd8w"),N=n.n(O),L={computed:N()({},Object(r.c)({AccountList:function(t){return t.accountRecords.accountList},IsLoading:function(t){return t.accountRecords.isLoading},MonthIncome:function(t){return t.accountRecords.monthIncome},MonthExpend:function(t){return t.accountRecords.monthExpend}})),methods:N()({},Object(r.b)({getAccountRecords:"getAccountRecords"}))},M={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"account-list"},[t._m(0),t._v(" "),n("div",{staticClass:"total"},[n("div",{staticClass:"col-6 income"},[n("p",[t._v("本月收入")]),t._v(" "),n("p",[t._v(t._s(t.MonthIncome))])]),t._v(" "),n("div",{staticClass:"col-6 expend"},[n("p",[t._v("本月支出")]),t._v(" "),n("p",[t._v(t._s(t.MonthExpend))])])]),t._v(" "),n("div",{staticClass:"container"},[n("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.getAccountRecords,expression:"getAccountRecords"}],attrs:{"infinite-scroll-disabled":"IsLoading","infinite-scroll-distance":"0"}},[t._l(t.AccountList,function(e,c){return n("li",{key:e.Date},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-6 day-left"},[n("span",{staticClass:"day"},[t._v(t._s(e.Date))])]),t._v(" "),n("div",{staticClass:"mid-day-total"}),t._v(" "),n("div",{staticClass:"col-6 day-right"},[n("span",{staticClass:"day"},[t._v(t._s(e.DateAmount))])])]),t._v(" "),t._l(e.AccountRecords,function(e,o){return[0==e.Type?n("div",{key:e.Id,staticClass:"row"},[n("router-link",{attrs:{to:{name:"addAccount",params:{index1:c,index2:o}}}},[n("div",{staticClass:"col-6 left"},[n("span",{staticClass:"amount"},[t._v(t._s(e.Amount))]),t._v(" "),n("span",{staticClass:"type-name"},[t._v(t._s(e.TypeName))])]),t._v(" "),n("i",{class:"mid icon iconfont icon-"+e.TypeCode})]),t._v(" "),n("div",{staticClass:"col-6 right"})],1):t._e(),t._v(" "),1==e.Type?n("div",{key:e.Id,staticClass:"row"},[n("div",{staticClass:"col-6 left"}),t._v(" "),n("router-link",{attrs:{to:{name:"addAccount",params:{index1:c,index2:o}}}},[n("i",{class:"mid icon iconfont icon-"+e.TypeCode}),t._v(" "),n("div",{staticClass:"col-6 right"},[n("span",{staticClass:"type-name"},[t._v(t._s(e.TypeName))]),t._v(" "),n("span",{staticClass:"amount"},[t._v(t._s(e.Amount))])])])],1):t._e()]})],2)}),t._v(" "),n("li",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.IsLoading,expression:"IsLoading"}],staticClass:"row loading-mid"},[n("div",{staticClass:"col-12"},[n("mt-spinner",{staticClass:"mid",attrs:{type:"double-bounce"}})],1)])])],2)]),t._v(" "),n("router-link",{staticClass:"fix-add",attrs:{to:"/Account/Add"}},[t._v("+")])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("img",{staticClass:"avatar",attrs:{src:n("BvrH"),alt:"avatar",srcset:""}})])}]};var P=n("VU/8")(L,M,!1,function(t){n("O8Tb")},"data-v-a54e547a",null).exports,F={data:function(){return{AccountDateModel:"",AccountYear:"",AccountMonth:"",AccountDate:"",Integer:"",Decimal:"",CalcAmount:this.Amount,SumAmount:"0.00",OperatorType:"",OkOperatorType:"",HasDot:!1}},created:function(){this.AccountDateModel=this.RecordDate;var t=this.RecordDate.split("-");this.AccountYear=t[0],this.AccountMonth=t[1],this.AccountDate=t[2]},props:["Amount","RecordDate"],methods:{openDatePicker:function(t){this.$refs[t].open()},handleChange:function(t){var e=new Date(t);this.AccountYear=e.getFullYear(),this.AccountMonth=e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1),this.AccountDate=e.getDate()>=10?e.getDate():"0"+e.getDate(),this.AccountDateModel=this.AccountYear+"-"+this.AccountMonth+"-"+this.AccountDate,this.emitAccountDate()},clickCalcNumber:function(t){""!=this.OperatorType&&(this.CalcAmount="0.00",this.Integer="",this.Decimal=""),this.HasDot?(this.Decimal.length<2&&(this.Decimal+=t),""==this.Integer&&(this.Integer="0")):this.Integer+=t;var e=this.CalcAmount.split(".");e[0]=this.Integer,1==this.Decimal.length?e[1]=this.Decimal+"0":2==this.Decimal.length?e[1]=this.Decimal:e[1]="00",this.CalcAmount=e[0]+"."+e[1],this.OperatorType="",this.emitAmount()},clickCalcDot:function(){this.HasDot=!0},clickCalcClear:function(){this.CalcAmount="0.00",this.Integer="",this.Decimal="",this.SumAmount="0.00",this.OperatorType="",this.OkOperatorType="",this.HasDot=!1,this.emitAmount()},clickCalcOperate:function(t){this.OkOperatorType=t,""==this.OperatorType&&("+"==t?(this.OperatorType="+",this.SumAmount=(parseFloat(this.SumAmount)+parseFloat(this.CalcAmount)).toFixed(2),this.CalcAmount=this.SumAmount):"-"==t?(this.OperatorType="-",0!=parseFloat(this.SumAmount)?(this.SumAmount=(parseFloat(this.SumAmount)-parseFloat(this.CalcAmount)).toFixed(2),this.CalcAmount=this.SumAmount):this.SumAmount=this.CalcAmount):this.OperatorType="",this.HasDot=!1),this.emitAmount()},clickCalcOk:function(){this.$emit("clickOk")},clickRemark:function(){this.$emit("openRemark",!1)},emitAmount:function(){this.$emit("showAmount",this.CalcAmount)},emitAccountDate:function(){this.$emit("setAccountDate",this.AccountDateModel)}}},$={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container calc"},[n("div",{staticClass:"row calc-set"},[n("div",{staticClass:"col-6",on:{click:function(e){t.openDatePicker("date-picker")}}},[n("p",{staticClass:"calc-year"},[t._v(t._s(t.AccountYear))]),t._v(" "),n("p",{staticClass:"calc-date"},[t._v(t._s(t.AccountMonth)+"月"+t._s(t.AccountDate)+"日")])]),t._v(" "),n("div",{staticClass:"col-6"},[n("p",{staticClass:"calc-remark",on:{click:t.clickRemark}},[t._v("备注")])])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-3",on:{click:function(e){t.clickCalcNumber(1)}}},[t._v("1")]),t._v(" "),n("div",{staticClass:"col-3",on:{click:function(e){t.clickCalcNumber(2)}}},[t._v("2")]),t._v(" "),n("div",{staticClass:"col-3",on:{click:function(e){t.clickCalcNumber(3)}}},[t._v("3")]),t._v(" "),n("div",{staticClass:"col-3",on:{click:function(e){t.clickCalcOperate("+")}}},[t._v("+")]),t._v(" "),n("div",{staticClass:"col-3",on:{click:function(e){t.clickCalcNumber(4)}}},[t._v("4")]),t._v(" "),n("div",{staticClass:"col-3",on:{click:function(e){t.clickCalcNumber(5)}}},[t._v("5")]),t._v(" "),n("div",{staticClass:"col-3",on:{click:function(e){t.clickCalcNumber(6)}}},[t._v("6")]),t._v(" "),n("div",{staticClass:"col-3",on:{click:function(e){t.clickCalcOperate("-")}}},[t._v("-")]),t._v(" "),n("div",{staticClass:"col-9"},[n("div",{staticClass:"col-4",on:{click:function(e){t.clickCalcNumber(7)}}},[t._v("7")]),t._v(" "),n("div",{staticClass:"col-4",on:{click:function(e){t.clickCalcNumber(8)}}},[t._v("8")]),t._v(" "),n("div",{staticClass:"col-4",on:{click:function(e){t.clickCalcNumber(9)}}},[t._v("9")]),t._v(" "),n("div",{staticClass:"col-4 calc-clear",on:{click:t.clickCalcClear}},[t._v("清零")]),t._v(" "),n("div",{staticClass:"col-4",on:{click:function(e){t.clickCalcNumber(0)}}},[t._v("0")]),t._v(" "),n("div",{staticClass:"col-4",on:{click:t.clickCalcDot}},[t._v(".")])]),t._v(" "),n("div",{staticClass:"col-3 calc-ok",on:{click:t.clickCalcOk}},[t._v("\n      OK\n    ")])]),t._v(" "),n("mt-datetime-picker",{ref:"date-picker",attrs:{type:"date"},on:{confirm:t.handleChange},model:{value:t.AccountDateModel,callback:function(e){t.AccountDateModel=e},expression:"AccountDateModel"}})],1)},staticRenderFns:[]};var j=n("VU/8")(F,$,!1,function(t){n("X7N6")},"data-v-6a33688a",null).exports,H={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"slide-up"}},[n("div",{staticClass:"container"},[n("div",{staticClass:"row add-header"},[n("i",{staticClass:"title-back icon iconfont icon-fanhui",on:{click:t.closeRemark}}),t._v(" "),n("div",{staticClass:"col-12 title"},[t._v("备注")]),t._v(" "),n("div",{staticClass:"col-12"},[n("span",{staticClass:"txt-count"},[t._v(t._s(t.InputCount)+"/200")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.Remark,expression:"Remark"}],staticClass:"remark",attrs:{rows:"8",placeholder:"请输入备注信息",maxlength:"200"},domProps:{value:t.Remark},on:{input:[function(e){e.target.composing||(t.Remark=e.target.value)},t.descInput]}})]),t._v(" "),n("div",{staticClass:"col-12 finish"},[n("button",{staticClass:"btn btn-primary btn-finish",on:{click:t.finish}},[t._v("完成")])])])])])},staticRenderFns:[]};var G=n("VU/8")({data:function(){return{InputCount:0,Remark:""}},methods:{descInput:function(){this.InputCount=this.Remark.length},closeRemark:function(){this.$emit("closeRemark",!0)},finish:function(){this.$emit("setRemarkInfo",this.Remark),this.$emit("closeRemark",!0)}}},H,!1,function(t){n("jJvr")},"data-v-ea84bf6a",null).exports,q=void 0,B={data:function(){return{Id:0,UserId:0,AccountTypeList:[],AccountIncomeTypeList:[],AccountExpendTypeList:[],SelectedId:4,SelectedType:"yiban",SelectedTypeName:"一般",Type:1,Amount:"0.00",RemarkNotOpen:!0,RemarkInfo:"",AccountDate:"",AccountDateBack:"",AmountBack:"",SlideName:""}},created:function(){q=this;var t=new Date;q.UserId=q.$store.state.user.currentUser.Id,q.getAccountTypeList(),q.AccountDate=t.getFullYear()+"-"+(t.getMonth()+1>=10?t.getMonth()+1:"0"+(t.getMonth()+1))+"-"+(t.getDate()>=10?t.getDate():"0"+t.getDate());var e=this.$route.params.index1,n=this.$route.params.index2;if(void 0!==n&&void 0!==n){var c=this.$store.state.accountRecords.accountList[e].AccountRecords[n];this.Id=c.Id,this.SelectedId=c.AccountTypeId,this.SelectedType=c.TypeCode,this.SelectedTypeName=c.TypeName,this.Type=c.Type,this.Amount=c.Amount,this.RemarkInfo=c.Remark,this.AccountDate=c.AccountDate,this.AccountDateBack=c.AccountDate,this.AmountBack=c.Amount}},beforeDestroy:function(){g.Indicator.close()},methods:N()({clickClose:function(){this.$router.go(-1)},clickDelete:function(){var t=this;g.Indicator.open("删除中..."),T.deleteAccountRecord(this.Id).then(function(e){var n=e.data;n.IsSuccess?t.deleteAccountRecord({index1:t.$route.params.index1,index2:t.$route.params.index2}).then(function(){t.$router.go(-1)}):(g.Indicator.close(),Object(g.Toast)(n.Message))}).catch(function(){g.Indicator.close(),Object(g.Toast)("删除失败")})},saveRecord:function(){var t=this;if("0.00"!==this.Amount){var e={UserId:this.UserId,Type:this.Type,AccountTypeId:this.SelectedId,Amount:this.Amount,Remark:this.RemarkInfo,AccountDate:this.AccountDate};g.Indicator.open("保存中..."),0===this.Id?T.createAccountRecord(e).then(function(e){var n=e.data;n.IsSuccess?(n.Data.TypeCode=t.SelectedType,n.Data.TypeName=t.SelectedTypeName,t.addAccountRecord(n.Data).then(function(){t.$router.go(-1)})):(g.Indicator.close(),Object(g.Toast)(n.Message))}).catch(function(t){console.log(t),g.Indicator.close(),Object(g.Toast)("操作异常")}):T.updateAccountRecord(this.Id,e).then(function(n){var c=n.data;if(c.IsSuccess){e.Id=t.Id,e.TypeCode=t.SelectedType,e.TypeName=t.SelectedTypeName;var o={hasUpdateDate:t.AccountDateBack!==t.AccountDate,index1:t.$route.params.index1,index2:t.$route.params.index2,updateAmount:(parseFloat(t.Amount)-parseFloat(t.AmountBack)).toFixed(2)};t.updateAccountRecord({updateInfo:o,record:e}).then(function(){t.$router.go(-1)})}else g.Indicator.close(),Object(g.Toast)(c.Message)})}else Object(g.Toast)("请输入金额")},getAccountTypeList:function(){var t=this;T.getAccountTypes(this.UserId).then(function(e){var n=e.data;t.AccountIncomeTypeList=n.Data.filter(function(t){return 0==t.Type}),t.AccountExpendTypeList=n.Data.filter(function(t){return 1==t.Type})}).catch(function(t){console.error(t)})},selectAccountType:function(t){this.Type=t,this.SelectedType=0==this.Type?"shouru":"yiban",this.SelectedId=0==this.Type?1:4,this.SelectedTypeName="一般"},selectType:function(t,e,n){this.SelectedId=t,this.SelectedType=e,this.SelectedTypeName=n},getAccountDate:function(t){console.log(t),this.AccountDate=t},showAmount:function(t){this.Amount=t},showRemark:function(t){this.RemarkNotOpen=t},closeRemark:function(t){this.RemarkNotOpen=t},getRemarkInfo:function(t){this.RemarkInfo=t}},Object(r.b)({addAccountRecord:"addAccountRecord",updateAccountRecord:"updateAccountRecord",deleteAccountRecord:"deleteAccountRecord"})),computed:{IsIncome:function(){return 0==this.Type?" active":""},IsExpend:function(){return 1==this.Type?" active":""}},components:{Calculator:j,Remark:G}},Y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.RemarkNotOpen,expression:"RemarkNotOpen"}],staticClass:"container"},[n("div",{staticClass:"row add-header"},[n("i",{staticClass:"title-back icon iconfont icon-fanhui",on:{click:t.clickClose}}),t._v(" "),void 0!==t.$route.params.index1&&void 0!==t.$route.params.index2?n("i",{staticClass:"title-delete icon iconfont icon-guanbi",on:{click:t.clickDelete}}):t._e(),t._v(" "),n("div",{class:"col-6 add-income"+t.IsIncome,on:{click:function(e){t.selectAccountType(0)}}},[t._v("收入")]),t._v(" "),n("div",{class:"col-6 add-expend"+t.IsExpend,on:{click:function(e){t.selectAccountType(1)}}},[t._v("支出")])]),t._v(" "),n("div",{staticClass:"row add-type"},[n("div",{staticClass:"col-2"},[n("i",{class:"selectedType icon iconfont icon-"+t.SelectedType})]),t._v(" "),n("div",{staticClass:"col-2 type-info"},[t._v("\n        "+t._s(t.SelectedTypeName)+"\n      ")]),t._v(" "),n("div",{staticClass:"col-8 type-amount"},[t._v("\n        "+t._s(t.Amount)+"\n      ")])]),t._v(" "),n("div",{staticClass:"row"},[t._l(t.AccountIncomeTypeList,function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:0==t.Type,expression:"Type==0"}],key:e.Code,staticClass:"col-2 type-icon-list-icon",on:{click:function(n){t.selectType(e.Id,e.Code,e.Name)}}},[n("i",{class:"icon iconfont icon-"+e.Code}),t._v(" "),n("p",[t._v(t._s(e.Name))])])}),t._v(" "),t._l(t.AccountExpendTypeList,function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:1==t.Type,expression:"Type==1"}],key:e.Code,staticClass:"col-2 type-icon-list-icon",on:{click:function(n){t.selectType(e.Id,e.Code,e.Name)}}},[n("i",{class:"icon iconfont icon-"+e.Code}),t._v(" "),n("p",[t._v(t._s(e.Name))])])})],2),t._v(" "),n("Calculator",{attrs:{Amount:t.Amount,RecordDate:t.AccountDate},on:{showAmount:t.showAmount,openRemark:t.showRemark,clickOk:t.saveRecord,setAccountDate:t.getAccountDate}})],1),t._v(" "),n("Remark",{directives:[{name:"show",rawName:"v-show",value:!t.RemarkNotOpen,expression:"!RemarkNotOpen"}],on:{closeRemark:t.closeRemark,setRemarkInfo:t.getRemarkInfo}})],1)},staticRenderFns:[]};var z=n("VU/8")(B,Y,!1,function(t){n("hEsh")},"data-v-c35c020c",null).exports,V=n("fzgq"),K=n.n(V),J={data:function(){return{IsSignUp:!1,IsRmeberUser:!1,SignInInfo:{UserId:"",Account:"qqq",Password:"5392"},SignUpInfo:{Account:"",Password:"",ConfirmPassword:""}}},beforeCreate:function(){var t=K()({width:window.innerWidth,height:window.innerHeight});document.body.style.background="url("+t.png()+")"},beforeDestroy:function(){document.body.style.background="",g.Indicator.close()},methods:N()({switchSignUp:function(t){this.IsSignUp=t},signUpAccount:function(){var t=this;return p()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.IsSignUp){e.next=2;break}return e.abrupt("return");case 2:if(0!==t.SignUpInfo.Account.length){e.next=5;break}return Object(g.Toast)("请输入帐号"),e.abrupt("return");case 5:if(0!==t.SignUpInfo.Password.length){e.next=8;break}return Object(g.Toast)("请输入密码"),e.abrupt("return");case 8:if(t.SignUpInfo.Password==t.SignUpInfo.ConfirmPassword){e.next=11;break}return Object(g.Toast)("请输入相同密码"),e.abrupt("return");case 11:return g.Indicator.open({text:"正在注册, 请稍等..."}),e.next=14,t.signUp({Account:t.SignUpInfo.Account,Password:t.SignUpInfo.Password});case 14:t.$router.push("/Account/List");case 15:case"end":return e.stop()}},e,t)}))()},signInAccount:function(){var t=this;return p()(d.a.mark(function e(){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.IsSignUp){e.next=2;break}return e.abrupt("return");case 2:if(g.Indicator.open({text:"登录中..."}),0!==t.SignInInfo.Account.length){e.next=6;break}return Object(g.Toast)("请输入帐号"),e.abrupt("return");case 6:if(0!==t.SignInInfo.Password.length){e.next=9;break}return Object(g.Toast)("请输入密码"),e.abrupt("return");case 9:return n={grant_type:"password",client_id:"pwd_client",client_secret:"pwd_secret",scope:"rk offline_access",username:t.SignInInfo.Account,password:t.SignInInfo.Password},e.next=12,t.signIn({tokenRequest:n,account:t.SignInInfo.Account});case 12:t.$router.push("/Account/List");case 13:case"end":return e.stop()}},e,t)}))()}},Object(r.b)({signIn:"userSignIn",signUp:"userSignUp"}))},W={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper mid"},[n("div",{staticClass:"container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.IsSignUp,expression:"!IsSignUp"}],staticClass:"signIn"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"account"}},[t._v("帐号：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.SignInInfo.Account,expression:"SignInInfo.Account"}],attrs:{type:"text",name:"account",id:"account",required:""},domProps:{value:t.SignInInfo.Account},on:{input:function(e){e.target.composing||t.$set(t.SignInInfo,"Account",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"password"}},[t._v("密码：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.SignInInfo.Password,expression:"SignInInfo.Password"}],attrs:{type:"password",name:"password",id:"password",required:""},domProps:{value:t.SignInInfo.Password},on:{input:function(e){e.target.composing||t.$set(t.SignInInfo,"Password",e.target.value)}}})]),t._v(" "),t._m(0),t._v(" "),n("div",{staticClass:"btn-group"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-6"},[n("button",{staticClass:"btn btnSignUp",attrs:{type:"button"},on:{click:function(e){t.switchSignUp(!0)}}},[t._v("注册")])]),t._v(" "),n("div",{staticClass:"col-6"},[n("button",{staticClass:"btn btnSignIn",attrs:{type:"button"},on:{click:t.signInAccount}},[t._v("登录")])])])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.IsSignUp,expression:"IsSignUp"}],staticClass:"signUp"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"signUp-account"}},[t._v("帐号：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.SignUpInfo.Account,expression:"SignUpInfo.Account"}],attrs:{type:"text",name:"account",id:"signUp-account","min-length":"4",maxlength:"12"},domProps:{value:t.SignUpInfo.Account},on:{input:function(e){e.target.composing||t.$set(t.SignUpInfo,"Account",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"signUp-password"}},[t._v("密码：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.SignUpInfo.Password,expression:"SignUpInfo.Password"}],attrs:{type:"password",name:"signUp-password",id:"signUp-password",minlength:"6",maxlength:"12"},domProps:{value:t.SignUpInfo.Password},on:{input:function(e){e.target.composing||t.$set(t.SignUpInfo,"Password",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"confirm-password"}},[t._v("确认密码：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.SignUpInfo.ConfirmPassword,expression:"SignUpInfo.ConfirmPassword"}],attrs:{type:"password",name:"confirm-password",id:"confirm-password",minlength:"6",maxlength:"12"},domProps:{value:t.SignUpInfo.ConfirmPassword},on:{input:function(e){e.target.composing||t.$set(t.SignUpInfo,"ConfirmPassword",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"btn-group"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-6"},[n("button",{staticClass:"btn btnSignUp",attrs:{type:"button"},on:{click:t.signUpAccount}},[t._v("注册")])]),t._v(" "),n("div",{staticClass:"col-6"},[n("button",{staticClass:"btn btnSignIn",attrs:{type:"button"},on:{click:function(e){t.switchSignUp(!1)}}},[t._v("返回")])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"setting-group"},[e("span",{staticClass:"remember"},[e("input",{attrs:{type:"checkbox",name:"remeberUser",id:"remeberUser"}}),this._v(" "),e("label",{staticClass:"remeberUser",attrs:{for:"remeberUser"}},[this._v("记住账号")])]),this._v(" "),e("span",{staticClass:"forgetPwd"},[this._v("忘记密码?")])])}]};var X=n("VU/8")(J,W,!1,function(t){n("nGo0")},"data-v-4c3e595a",null).exports,Q={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"layout"},[e("transition",{attrs:{name:this.transitionName}},[e("router-view",{staticClass:"child-view"})],1)],1)},staticRenderFns:[]};var Z=n("VU/8")({data:function(){return{transitionName:"slide-left"}},watch:{$route:function(t,e){"/"==t.path?this.transitionName="slide-right":this.transitionName="slide-left"}}},Q,!1,function(t){n("QJ0s")},"data-v-8d2ceacc",null).exports;o.default.use(i.a);var tt=new i.a({routes:[{path:"/",component:Z,children:[{path:"",alias:"/Login",component:X},{path:"/Account/List",name:"accountList",component:P},{path:"/Account/Add",name:"addAccount",component:z}]}],scrollBehavior:function(t,e,n){return n?(console.log(n),n):{x:0,y:0}}});tt.beforeEach(function(t,e,n){E.commit("SET_ROUTER_LOG",{prev:e.path.toLowerCase(),next:t.path.toLowerCase()}),"/"==e.path&&"/Login"===e.path||n(),E.state.user.isLogin?n():n({path:"/Login"})});var et=tt,nt=n("v5o6"),ct=n.n(nt);n("d8/S"),n("2bHb"),n("VaBq");o.default.use(g.InfiniteScroll),o.default.component(g.Spinner.name,g.Spinner),o.default.component(g.DatetimePicker.name,g.DatetimePicker),o.default.config.productionTip=!1,ct.a.attach(document.body),new o.default({el:"#app",router:et,store:E,template:"<App/>",components:{App:s}})},O8Tb:function(t,e){},QJ0s:function(t,e){},VaBq:function(t,e){},X7N6:function(t,e){},"d8/S":function(t,e){},hEsh:function(t,e){},jJvr:function(t,e){},nGo0:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.4248139d2914de3d45c0.js.map